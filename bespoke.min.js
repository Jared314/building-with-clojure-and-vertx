/*! Bespoke.js v0.4.0 © 2014 Mark Dalgleish, Licensed MIT */
!function(n,e){var i=function(e,i){var c=1===e.nodeType?e:document.querySelector(e),f=[].filter.call(c.children,function(n){return"SCRIPT"!==n.nodeName}),o=f[0],l={},d=function(n,e){f[n]&&(x("deactivate",b(o,e)),o=f[n],f.map(s),x("activate",b(o,e)),u(o,"active"),a(o,"inactive"))},s=function(n,e){var i=e-f.indexOf(o),t=i>0?"after":"before";["before(-\\d+)?","after(-\\d+)?","active","inactive"].map(a.bind(null,n)),n!==o&&["inactive",t,t+"-"+Math.abs(i)].map(u.bind(null,n))},p=function(n,e){return arguments.length?void(x("slide",b(f[n],e))&&d(n,e)):f.indexOf(o)},v=function(n,e){var i=f.indexOf(o)+n;x(n>0?"next":"prev",b(o,e))&&d(i,e)},m=function(n,e){return(l[n]||(l[n]=[])).push(e),function(){l[n]=l[n].filter(function(n){return n!==e})}},x=function(n,e){return(l[n]||[]).reduce(function(n,i){return n&&i(e)!==!1},!0)},b=function(n,e){return e=e||{},e.index=f.indexOf(n),e.slide=n,e},g={on:m,fire:x,slide:p,next:v.bind(null,1),prev:v.bind(null,-1),parent:c,slides:f};u(c,"parent"),f.map(function(n){u(n,"slide")});for(var h in i){if(!r[h])throw Error("Missing plugin: "+n+"-"+h);i[h]!==!1&&r[h](g,i[h])}return d(0),t.push(g),g},t=[],r={},u=function(e,i){e.classList.add(n+"-"+i)},a=function(e,i){e.className=e.className.replace(RegExp(n+"-"+i+"(\\s|$)","g")," ").trim()},c=function(n){return function(){var e=arguments;t.map(function(i){i[n].apply(null,e)})}};e[n]={from:i,slide:c("slide"),next:c("next"),prev:c("prev"),plugins:r}}("bespoke",window);

/*! bespoke-keys v0.1.0 © 2013 Mark Dalgleish, Licensed MIT */
bespoke.plugins.keys=function(a,b){var c=b===!0||"horizontal"==b;document.addEventListener("keydown",function(b){(34==b.which||32==b.which||c&&39==b.which||!c&&40==b.which)&&a.next(),(33==b.which||c&&37==b.which||!c&&38==b.which)&&a.prev()})};

/*! bespoke-run v0.1.0 © 2014 Matteo Collina, Licensed MIT */
bespoke.plugins.run=function(a){var b=-1;[].forEach.call(document.querySelectorAll("[data-bespoke-run]"),function(b){b.setAttribute("href","#"),b.addEventListener("click",function(b){a.fire("runCurrentCode"),b.preventDefault()})}),a.on("runCurrentCode",function(){var a=document.querySelector(".bespoke-active code").innerText;new Function(a)()}),a.on("prev",function(){b=a.slide()}),a.on("next",function(c){var d=c.slide,e=d.querySelector("code[data-bespoke-autorun]"),f=b!==a.slide();return b=a.slide(),e&&f?(a.fire("runCurrentCode"),!1):!0})};

/*! bespoke-hash v0.1.2 © 2013 Mark Dalgleish, Licensed MIT */
(function(e){e.plugins.hash=function(e){var t,n=function(){var t=window.location.hash.slice(1),n=parseInt(t,10);t&&(n?r(n-1):e.slides.forEach(function(e,n){e.getAttribute("data-bespoke-hash")===t&&r(n)}))},r=function(n){n!==t&&e.slide(n)};setTimeout(function(){n(),e.on("activate",function(e){var n=e.slide.getAttribute("data-bespoke-hash");window.location.hash=n||e.index+1,t=e.index}),window.addEventListener("hashchange",n)},0)}})(bespoke);
